<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
    <title>UI components - lookup field</title>
    <script src="../lib/vue.js"></script>
    <script src="../lib/jquery.js"></script>
    <script src="../../build/MultiLookup.js"></script>
    <script src="../../build/svgicons.js"></script>
    <link type="text/css" rel="stylesheet" href="../../build/css/MultiLookup.css">
</head>
<body>
<div id="app">
    <h1>Multi Lookup</h1>
    <multi-lookup :items="list" @lookup="doQuery" @validate="doValidate" width="400" :is-glob="true" :can-add-item="canAddItem" placeholder="Start typing to find a State" ref="multilookup" :selected-item="selectedItem"></multi-lookup>
</div>
<script>
    var MultiLookup = LMUI.MultiLookup;

    new Vue({
        el: '#app',
        data: function () {
            return {
                list: [],
                selectedItem: {
                    id: 'test',
                    name: 'test'
                }
            }
        },
        components: {
            multiLookup: MultiLookup
        },
        methods: {
            doQuery: function (query) {
                var result = [];
                var me = this;
                setTimeout(function () {
                    fullData.forEach(function (datum) {
                        if (~datum.name.toLowerCase().indexOf(query.toLowerCase())) {
                            result.push(datum.name);
                        }
                    });
                    me.list = result;
                }, 100);
            },

            doValidate: function (query) {
                console.log('validate', query);

                if (!this.$refs.multilookup.validateSelectedItem()) {
                    console.log('you must select from the dropdown');
                }
            },

            canAddItem: function (item) {
                console.log('should the item', item, 'can be added?');
                if (!this.$refs.multilookup.validateSelectedItem()) {
                    console.log('you must select from the dropdown');
                    return false;
                }
                return true;
            }
        }
    });

    var fullData = [
        { abbr: "AL", name: "Alabama"},
        { abbr: "AK", name: "Alaska"},
        { abbr: "AZ", name: "Arizona"},
        { abbr: "AR", name: "Arkansas"},
        { abbr: "CA", name: "California"},
        { abbr: "CO", name: "Colorado"},
        { abbr: "CT", name: "Connecticut"},
        { abbr: "DE", name: "Delaware"},
        { abbr: "FL", name: "Florida"},
        { abbr: "GA", name: "Georgia"},
        { abbr: "HI", name: "Hawaii"},
        { abbr: "ID", name: "Idaho"},
        { abbr: "IL", name: "Illinois"},
        { abbr: "IN", name: "Indiana"},
        { abbr: "IA", name: "Iowa"},
        { abbr: "KS", name: "Kansas"},
        { abbr: "KY", name: "Kentucky"},
        { abbr: "LA", name: "Louisiana"},
        { abbr: "ME", name: "Maine"},
        { abbr: "MD", name: "Maryland"},
        { abbr: "MA", name: "Massachusetts"},
        { abbr: "MI", name: "Michigan"},
        { abbr: "MN", name: "Minnesota"},
        { abbr: "MS", name: "Mississippi"},
        { abbr: "MO", name: "Missouri"},
        { abbr: "MT", name: "Montana"},
        { abbr: "NE", name: "Nebraska"},
        { abbr: "NV", name: "Nevada"},
        { abbr: "NH", name: "New Hampshire"},
        { abbr: "NJ", name: "New Jersey"},
        { abbr: "NM", name: "New Mexico"},
        { abbr: "NY", name: "New York"},
        { abbr: "NC", name: "North Carolina"},
        { abbr: "ND", name: "North Dakota"},
        { abbr: "OH", name: "Ohio"},
        { abbr: "OK", name: "Oklahoma"},
        { abbr: "OR", name: "Oregon"},
        { abbr: "PA", name: "Pennsylvania"},
        { abbr: "RI", name: "Rhode Island"},
        { abbr: "SC", name: "South Carolina"},
        { abbr: "SD", name: "South Dakota"},
        { abbr: "TN", name: "Tennessee"},
        { abbr: "TX", name: "Texas"},
        { abbr: "UT", name: "Utah"},
        { abbr: "VT", name: "Vermont"},
        { abbr: "VA", name: "Virginia"},
        { abbr: "WA", name: "Washington"},
        { abbr: "WV", name: "West Virginia"},
        { abbr: "WI", name: "Wisconsin"},
        { abbr: "WY", name: "Wyoming"},
        {
            abbr: "WYWIWVWAVAVTUTTXTNOROK",
            name: "Wyoming, Wisconsin, West Virginiam, Washington, Virginia, Vermont, Utah, Texas, Tennessee, Oregon and Oklahoma"
        }
    ];
</script>
</body>
</html>
