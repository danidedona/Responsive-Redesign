<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
    <title>UI components - lookup field</title>
    <script src="../lib/vue.js"></script>
    <script src="../lib/jquery.js"></script>
    <script src="../lib/jquery-ui.js"></script>
    <script src="../lib/jquery.validationEngine.js"></script>
    <script src="../lib/jquery.validationEngine-en.js"></script>
    <script src="../lib/moment.js"></script>
    <script src="../lib/es5-shim.js"></script>
    <script src="../lib/polyfill.min.js"></script>
    <link type="text/css" rel="stylesheet" href="../lib/jquery-ui.min.css">
    <link type="text/css" rel="stylesheet" href="../lib/validationEngine.jquery.css">
    <link type="text/css" rel="stylesheet" href="../../build/css/TimeRangePicker.css">
    <script src="../../build/svgicons.js"></script>
    <script src="../../build/TimeRangePicker.js"></script>
</head>
<body>
<div id="app" style="padding-left:50px;">
    <h2 style="color: #0076FF;">Time Range:</h2>
    <div>
        <time-range :initial-time-range="initialTimeRange" :on-save-callback="onSaveCallback" :on-validate="onValidate"></time-range>
    </div>
    <h3 style="margin-top: 100px;">
        Output: <span id="output"></span>
    </h3>
</div>
<script>
    function showValidateErrorMsg(el, msg, direction, keepErrorStay) {
        $(el).validationEngine('showPrompt', msg, 'warn', direction || 'topLeft', true);

        if (!keepErrorStay) {
            clearTimeout(el.lmTimer);
            el.lmTimer = setTimeout(function () {
                $(el).validationEngine('hide');
            }, 3000);
        }
    }

    var vue = new Vue({
        el: '#app',
        data: function () {
            return {
                initialTimeRange: '3months' //'default', '1day', '3months', '[1478858371, 1478858374]'
            }
        },
        components: {
            timeRange: LMUI.TimeRangePicker
        },
        methods: {
            onSaveCallback: function(timerange){
                $('#output').text(timerange);
            },

            onValidate: function(el, msg){
                showValidateErrorMsg(el, msg)
            }
        }
    });
</script>
</body>
</html>
